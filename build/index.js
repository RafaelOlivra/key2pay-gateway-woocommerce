(()=>{"use strict";const e=window.wp.i18n,a=window.wp.element,t=window.wp.data,n=window.ReactJSXRuntime,{registerPaymentMethod:s}=window.wc.wcBlocksRegistry,o=s=>{const{eventRegistration:o,emitResponse:y,components:r}=s,{PaymentMethodLabel:i}=r,{onPaymentSetup:c}=o,p=(0,t.select)(window.wc.wcBlocksData.CART_STORE_KEY),[l,d]=(0,a.useState)(""),[_,u]=(0,a.useState)(""),[m,k]=(0,a.useState)("");return(0,a.useEffect)(()=>{const e=localStorage.getItem("key2pay_thai_debit_account_no"),a=localStorage.getItem("key2pay_thai_debit_account_name"),t=localStorage.getItem("key2pay_thai_debit_bank_code");e&&d(e),a&&u(a),t&&k(t)},[]),(0,a.useEffect)(()=>{localStorage.setItem("key2pay_thai_debit_account_no",l),localStorage.setItem("key2pay_thai_debit_account_name",_),localStorage.setItem("key2pay_thai_debit_bank_code",m)},[l,_,m]),(0,a.useEffect)(()=>{const a=c(async()=>{const a=l&&_&&m;return p.getCartTotals().total_price>=100?a?{type:y.responseTypes.SUCCESS,meta:{paymentMethodData:{payer_account_no:l,payer_account_name:_,payer_bank_code:m}}}:{type:y.responseTypes.ERROR,message:(0,e.__)("Please fill in all required fields for Thai QR Debit.","key2pay")}:{type:y.responseTypes.ERROR,message:(0,e.__)("Thai QR Debit is only available for orders of 100 THB or more.","key2pay")}});return()=>{a()}},[y.responseTypes.ERROR,y.responseTypes.SUCCESS,c,l,_,m]),(0,n.jsxs)("div",{className:"k2p-thai-debit",children:[(0,n.jsx)(i,{text:(0,e.__)("Pay using Thai QR Debit payments via Key2Pay. Please enter your bank details below.","key2pay")}),(0,n.jsx)("div",{className:"k2p-field-group",children:(0,n.jsx)("p",{children:(0,n.jsxs)("label",{children:[(0,e.__)("Bank Code","key2pay"),(0,n.jsx)("input",{type:"text",placeholder:(0,e.__)("e.g., 014","key2pay"),name:"payer_bank_code",value:m,onChange:e=>k(e.target.value),required:!0})]})})}),(0,n.jsx)("div",{className:"k2p-field-group",children:(0,n.jsx)("p",{children:(0,n.jsxs)("label",{children:[(0,e.__)("Bank Account Number","key2pay"),(0,n.jsx)("input",{type:"text",placeholder:(0,e.__)("Enter account number","key2pay"),name:"payer_account_no",value:l,onChange:e=>d(e.target.value),required:!0})]})})}),(0,n.jsx)("div",{className:"k2p-field-group",children:(0,n.jsx)("p",{children:(0,n.jsxs)("label",{children:[(0,e.__)("Bank Account Name","key2pay"),(0,n.jsx)("input",{type:"text",placeholder:(0,e.__)("Name on account","key2pay"),name:"payer_account_name",value:_,onChange:e=>u(e.target.value),required:!0})]})})})]})};s({name:"key2pay_thai_debit",paymentMethodId:"key2pay_thai_debit",label:(0,e.__)("Key2Pay Thai QR Debit (QR Payment)","key2pay"),content:(0,n.jsx)(o,{}),edit:(0,n.jsx)(o,{}),canMakePayment:()=>!0,ariaLabel:(0,e.__)("Key2Pay Thai QR Debit (QR Payment)","key2pay"),supports:{features:["products","refunds"]}});const y=a=>{const{eventRegistration:t,emitResponse:s,components:o}=a,{PaymentMethodLabel:y}=o,{onPaymentSetup:r}=t;return(0,n.jsx)("div",{className:"k2p-credit-card",children:(0,n.jsx)(y,{text:(0,e.__)("Pay using Credit Card via Key2Pay. You will be redirected to complete your payment securely.","key2pay")})})};s({name:"key2pay_credit",paymentMethodId:"key2pay_credit",label:(0,e.__)("Key2Pay Credit Card","key2pay"),content:(0,n.jsx)(y,{}),edit:(0,n.jsx)(y,{}),canMakePayment:()=>!0,ariaLabel:(0,e.__)("Key2Pay Credit Card","key2pay"),supports:{features:["products","refunds"]}})})();