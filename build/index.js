(()=>{"use strict";const e=window.wp.i18n,a=window.wp.element,t=window.wp.data,n=window.ReactJSXRuntime,{registerPaymentMethod:s}=window.wc.wcBlocksRegistry,i=s=>{const{eventRegistration:i,emitResponse:y,components:o}=s,{PaymentMethodLabel:c}=o,{onPaymentSetup:r}=i,{getPaymentMethodData:p}=window.wc.wcSettings,d=window.key2pay.assetsUrl+"images/key2pay.png",l=(0,t.select)(window.wc.wcBlocksData.CART_STORE_KEY);console.log(s);const{title:_,description:u}=p("key2pay_thai_debit")||{title:(0,e.__)("Key2Pay Thai QR","key2pay"),description:(0,e.__)("Pay using Thai QR payments via Key2Pay.","key2pay")},[m,k]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[w,b]=(0,a.useState)("");return(0,a.useEffect)(()=>{const e=localStorage.getItem("key2pay_thai_debit_account_no"),a=localStorage.getItem("key2pay_thai_debit_account_name"),t=localStorage.getItem("key2pay_thai_debit_bank_code");e&&k(e),a&&g(a),t&&b(t)},[]),(0,a.useEffect)(()=>{localStorage.setItem("key2pay_thai_debit_account_no",m),localStorage.setItem("key2pay_thai_debit_account_name",h),localStorage.setItem("key2pay_thai_debit_bank_code",w)},[m,h,w]),(0,a.useEffect)(()=>{const a=r(async()=>{const a=m&&h&&w;return l.getCartTotals().total_price>=100?a?{type:y.responseTypes.SUCCESS,meta:{paymentMethodData:{payer_account_no:m,payer_account_name:h,payer_bank_code:w}}}:{type:y.responseTypes.ERROR,message:(0,e.__)("Please fill in all required fields for Thai QR.","key2pay")}:{type:y.responseTypes.ERROR,message:(0,e.__)("Thai QR is only available for orders of 100 THB or more.","key2pay")}});return()=>{a()}},[y.responseTypes.ERROR,y.responseTypes.SUCCESS,r,m,h,w]),(0,n.jsxs)("div",{className:"k2p-thai-debit",children:[(0,n.jsx)(c,{text:u,icon:(0,n.jsx)("img",{src:d,alt:_,width:35})}),(0,n.jsx)("p",{children:(0,e.__)("You will be redirected to the payment page.","key2pay")+" "+(0,e.__)("Please fill in the details below:","key2pay")}),(0,n.jsxs)("div",{className:"k2p-grid-3",children:[(0,n.jsx)("div",{className:"k2p-field-group",children:(0,n.jsx)("p",{children:(0,n.jsxs)("label",{children:[(0,e.__)("Bank Code","key2pay"),(0,n.jsx)("input",{type:"text",placeholder:(0,e.__)("e.g. KBANK","key2pay"),name:"payer_bank_code",value:w,onChange:e=>b(e.target.value),required:!0})]})})}),(0,n.jsx)("div",{className:"k2p-field-group",children:(0,n.jsx)("p",{children:(0,n.jsxs)("label",{children:[(0,e.__)("Bank Account Number","key2pay"),(0,n.jsx)("input",{type:"text",placeholder:(0,e.__)("Enter your debit account number","key2pay"),name:"payer_account_no",value:m,onChange:e=>k(e.target.value),required:!0})]})})}),(0,n.jsx)("div",{className:"k2p-field-group",children:(0,n.jsx)("p",{children:(0,n.jsxs)("label",{children:[(0,e.__)("Bank Account Name","key2pay"),(0,n.jsx)("input",{type:"text",placeholder:(0,e.__)("Name on your debit account","key2pay"),name:"payer_account_name",value:h,onChange:e=>g(e.target.value),required:!0})]})})})]})]})};s({name:"key2pay_thai_debit",paymentMethodId:"key2pay_thai_debit",label:(0,e.__)("Key2Pay Thai QR","key2pay"),content:(0,n.jsx)(i,{}),edit:(0,n.jsx)(i,{}),canMakePayment:()=>!0,ariaLabel:(0,e.__)("Key2Pay Thai QR","key2pay"),supports:{features:["products","refunds"]}});const y=a=>{const{eventRegistration:s,emitResponse:i,components:y}=a,{PaymentMethodLabel:o}=y,{onPaymentSetup:c}=s,{getPaymentMethodData:r}=window.wc.wcSettings,p=window.key2pay.assetsUrl+"images/key2pay.png",{title:d,description:l}=((0,t.select)(window.wc.wcBlocksData.CART_STORE_KEY),r("key2pay_credit")||{title:(0,e.__)("Key2Pay Credit Card","key2pay"),description:(0,e.__)("Pay using Credit Card via Key2Pay.","key2pay")});return(0,n.jsxs)("div",{className:"k2p-credit-card",children:[(0,n.jsx)(o,{text:l,icon:(0,n.jsx)("img",{src:p,alt:d,width:35})}),(0,n.jsx)("p",{children:(0,e.__)("You will be redirected to the payment page.","key2pay")})]})};s({name:"key2pay_credit",paymentMethodId:"key2pay_credit",label:(0,e.__)("Key2Pay Credit Card","key2pay"),content:(0,n.jsx)(y,{}),edit:(0,n.jsx)(y,{}),canMakePayment:()=>!0,ariaLabel:(0,e.__)("Key2Pay Credit Card","key2pay"),supports:{features:["products","refunds"]}})})();